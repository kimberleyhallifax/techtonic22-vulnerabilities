FROM maven:3-jdk-8-slim AS builder

COPY src/ src/
COPY pom.xml pom.xml

RUN cd src/main/resources/exploit && javac -source 1.8 -target 1.8 Exploit.java && cd ../../../
RUN mvn clean package

FROM openjdk:8u181-slim-stretch

COPY --from=builder target/exploit.jar exploit.jar

ENTRYPOINT [ "java", "-jar", "exploit.jar"]

EXPOSE 8081
EXPOSE 1389
